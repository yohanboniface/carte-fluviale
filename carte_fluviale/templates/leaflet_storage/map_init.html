    <div id="map"></div>
    <script type="text/javascript">
        {% if locale %}
            L.S.setLocale("{{ locale }}");
        {% endif %}
        map_settings = {
            "storage_id": {{ map.pk }},
            "center": {{ map.center.geojson|safe }},
            "categories": {{ categories|safe }},
            "urls": {{ urls|safe }},
            "default_iconUrl": "{{ STATIC_URL }}storage/src/img/marker.png",
            "zoom": {{ map.zoom }},
            "tilelayers": {{ tilelayers|safe }},
            "allowEdit": {{ allowEdit }},
            "embedControl": {{ embedControl }},
            "homeControl": {{ homeControl }},
            "locateControl": {{ locateControl }},
            "jumpToLocationControl": {{ jumpToLocationControl }},
            "enableMarkerDraw": {{ enableMarkerDraw }},
            "enablePolylineDraw": {{ enablePolylineDraw }},
            "enablePolygonDraw": {{ enablePolygonDraw }},
            "editInOSMControl": {{ editInOSMControl }},
            "scaleControl": {{ scaleControl }},
            "miniMap": {{ miniMap }}
        }
        {% if locateOnLoad %}
            map_settings['locate'] = {"setView": true}
        {% endif %}
        var MAP = new L.Storage.Map("map", map_settings);
        L.tileLayer('http://tiles.openseamap.org/seamark/{z}/{x}/{y}.png', {
            attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, sea marks <a href="http://openseamap.org">OpenSeaMap</a>',
            maxZoom: 18,
            minZoom: 10,
            zIndex: 1000
        }).addTo(MAP);
    </script>
